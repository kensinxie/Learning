# 多线程2

P11-

## 线程五大状态

### 线程停止

![image-20210119202633533](多线程2.assets/image-20210119202633533.png)



![image-20210119202713710](多线程2.assets/image-20210119202713710.png)



![image-20210119202832418](多线程2.assets/image-20210119202832418.png)



### 线程停止

![image-20210119202927551](多线程2.assets/image-20210119202927551.png)

![image-20210119203557375](多线程2.assets/image-20210119203557375.png)



![image-20210119203514515](多线程2.assets/image-20210119203514515.png)

### 线程休眠

![image-20210119203628756](多线程2.assets/image-20210119203628756.png)

 

#### 模拟网络延时

 ![image-20210119203917428](多线程2.assets/image-20210119203917428.png)







#### 模拟网络倒计时

 

![image-20210119204053537](多线程2.assets/image-20210119204053537.png)

 

![image-20210119204241176](多线程2.assets/image-20210119204241176.png)



### 线程礼让

![image-20210119204323828](多线程2.assets/image-20210119204323828.png)

 ![image-20210119204753666](多线程2.assets/image-20210119204753666.png)



#### 线程强制执行

![image-20210119204819237](多线程2.assets/image-20210119204819237.png)



 ![image-20210119205224553](多线程2.assets/image-20210119205224553.png)



#### 观测线程状态

![image-20210119205314332](多线程2.assets/image-20210119205314332.png)





![image-20210119210241215](多线程2.assets/image-20210119210241215.png)





#### 线程优先级



![image-20210119210322584](多线程2.assets/image-20210119210322584.png)



 ![image-20210119212430083](多线程2.assets/image-20210119212430083.png)



### 守护线程

![image-20210120145451763](多线程2.assets/image-20210120145451763.png)

>  gc线程：守护线程

![image-20210120150012270](多线程2.assets/image-20210120150012270.png)

> 用户线程一旦结束，守护线程也会自动停止了。

## 线程同步

![image-20210120150244177](多线程2.assets/image-20210120150244177.png)

![image-20210120150517474](多线程2.assets/image-20210120150517474.png)

![image-20210120150438778](多线程2.assets/image-20210120150438778.png)



![image-20210120150708395](多线程2.assets/image-20210120150708395.png)



### 三大不安全案例

![image-20210120152822981](多线程2.assets/image-20210120152822981.png)



![image-20210120152916843](多线程2.assets/image-20210120152916843.png)

![image-20210120153119965](多线程2.assets/image-20210120153119965.png)



![image-20210120153149918](多线程2.assets/image-20210120153149918.png)



![image-20210120153246070](多线程2.assets/image-20210120153246070.png)

![image-20210120153223978](多线程2.assets/image-20210120153223978.png)

### 同步方法

![image-20210120153337270](多线程2.assets/image-20210120153337270.png)

![image-20210120153809731](多线程2.assets/image-20210120153809731.png)

![image-20210120153947247](多线程2.assets/image-20210120153947247.png)

![image-20210120154309722](多线程2.assets/image-20210120154309722.png)



![image-20210120154355445](多线程2.assets/image-20210120154355445.png)



### JUC安全

concurrent包，并发安全的包

![image-20210120155106114](多线程2.assets/image-20210120155106114.png)



### 死锁

![image-20210120155631539](多线程2.assets/image-20210120155631539.png)

![image-20210120160653663](多线程2.assets/image-20210120160653663.png)

![image-20210120160749701](多线程2.assets/image-20210120160749701.png)



![image-20210120160841656](多线程2.assets/image-20210120160841656.png)



## 高级部分

### Lock锁

![image-20210120161020150](多线程2.assets/image-20210120161020150.png)

ReentrantLock 可重入锁。



![image-20210120161525191](多线程2.assets/image-20210120161525191.png)

![image-20210120161851167](多线程2.assets/image-20210120161851167.png)



![image-20210120161909134](多线程2.assets/image-20210120161909134.png)

 

## 线程协作（通信）

![image-20210120162245535](多线程2.assets/image-20210120162245535.png)

![image-20210120162258930](多线程2.assets/image-20210120162258930.png)



![image-20210120162341186](多线程2.assets/image-20210120162341186.png)



![image-20210120162526818](多线程2.assets/image-20210120162526818.png)



![image-20210120162542136](多线程2.assets/image-20210120162542136.png)





### 管程法（利用缓冲区解决

![image-20210120163541190](多线程2.assets/image-20210120163541190.png)

![image-20210120163613636](多线程2.assets/image-20210120163613636.png)

![image-20210120163637770](多线程2.assets/image-20210120163637770.png)

### 信号灯法

标志位解决。

![image-20210120162619586](多线程2.assets/image-20210120162619586.png)

信号灯法：生产一个就马上通知了。

![image-20210123220902158](多线程2.assets/image-20210123220902158.png)

![image-20210123220701222](多线程2.assets/image-20210123220701222.png)

![image-20210123220723699](多线程2.assets/image-20210123220723699.png)

![image-20210123220740516](多线程2.assets/image-20210123220740516.png)

![image-20210123220818003](多线程2.assets/image-20210123220818003.png)



### 线程池

![image-20210123221100612](多线程2.assets/image-20210123221100612.png)

![image-20210123221333251](多线程2.assets/image-20210123221333251.png)

![image-20210123221626382](多线程2.assets/image-20210123221626382.png)![image-20210123221645334](多线程2.assets/image-20210123221645334.png)

